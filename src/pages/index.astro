---
import { type CollectionEntry, getCollection } from "astro:content";
import SocialList from "@/components/SocialList.astro";
import PostPreview from "@/components/blog/PostPreview.astro";
import Note from "@/components/note/Note.astro";
import { getAllPosts } from "@/data/post";
import PageLayout from "@/layouts/Base.astro";
import { collectionDateSort } from "@/utils/date";

// Posts
const MAX_POSTS = 10;
const allPosts = await getAllPosts();
const allPostsByDate = allPosts
	.sort(collectionDateSort)
	.slice(0, MAX_POSTS) as CollectionEntry<"post">[];

// Notes
const MAX_NOTES = 2;
const allNotes = await getCollection("note");
const latestNotes = allNotes.sort(collectionDateSort).slice(0, MAX_NOTES);
---

<PageLayout meta={{ title: "Home" }}>
	<!-- Background blur -->
	<div class="relative overflow-hidden">
		<div class="absolute inset-0 -z-10">
			<div class="absolute top-0 right-1/4 w-96 h-96 bg-gradient-to-br from-purple-300/30 via-blue-300/30 to-transparent rounded-full blur-3xl"></div>
			<div class="absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-blue-300/30 via-pink-300/30 to-transparent rounded-full blur-3xl"></div>
			<div class="absolute -top-1/4 left-0 w-[500px] h-[500px] bg-gradient-to-br from-indigo-300/20 via-orange-300/20 to-transparent rounded-full blur-3xl"></div>
			<div class="absolute -top-1/4 right-0 w-[500px] h-[500px] bg-gradient-to-br from-orange-300/20 via-indigo-300/20 to-transparent rounded-full blur-3xl"></div>
		</div>
		
		<!-- Hero section -->
		<section class="pt-16 pb-24 px-4">
			<div class="max-w-4xl mx-auto text-center">
				<!-- Logo -->
				<div class="mb-8">
					<svg class="inline-block w-20 h-20 mx-auto" viewBox="0 0 311.41 292.77">
						<defs>
							<linearGradient id="hero-gradient" x1="276.59" y1="278.26" x2="27.49" y2="-19.21" gradientUnits="userSpaceOnUse">
								<stop offset="0" stop-color="#ff9d00"/>
								<stop offset=".21" stop-color="#f75830"/>
								<stop offset=".41" stop-color="#f11e5a"/>
								<stop offset=".82" stop-color="#9800a6"/>
								<stop offset="1" stop-color="#7600bf"/>
							</linearGradient>
						</defs>
						<path fill="url(#hero-gradient)" d="m191.87,148.13l8.68-31.72c1.25-4.59,3.28-4.62,4.53-.06,1.25,4.55,2.27,8.24,2.27,8.24.63,2.29.65,6.01.04,8.31l-4.81,18.14c-2.72,9.7-7.77,27.76-23.47,27.76-3.9,0-7.15-1.12-9.86-2.95,15.03-.65,19.95-18.21,22.62-27.73Zm-39.65-29.57l2.21-8c.63-2.29.65-6.01.05-8.31l-4.95-17.85c-2.72-9.7-7.77-27.76-23.47-27.76-3.9,0-7.15,1.12-9.86,2.95,15.03.65,19.95,18.21,22.62,27.73l8.89,30.95c1.27,4.58,3.3,4.71,4.52.3Zm92.71-31.25l21.44,81.16h-26.07l-22.21-84.08c-2.71-9.7-7.77-27.76-23.47-27.76s-20.76,18.06-23.49,27.84l-16.81,63.65c-3.89,13.88-7.59,19.57-12.75,19.57s-8.87-5.69-12.78-19.65l-16.81-63.65c-2.71-9.7-7.77-27.76-23.47-27.76s-20.76,18.06-23.49,27.84l-23.38,88.5c-.85,3.22,1.16,5.83,4.49,5.83h36.99c3.33,0,6.72-2.61,7.57-5.83l10.96-40.65c.61-2.3.62-6.03.01-8.33l-2.49-9.58c-1.2-4.6-3.15-4.6-4.36,0l-14.49,54.34v-.28h-26l21.42-81.08c3.91-13.96,7.61-19.65,12.78-19.65s8.87,5.69,12.75,19.57l16.81,63.65c2.74,9.78,7.79,27.84,23.49,27.84s20.76-18.06,23.47-27.76l16.81-63.65c3.91-13.96,7.61-19.65,12.78-19.65s8.87,5.69,12.75,19.57l22.63,85.67c.85,3.22,4.24,5.83,7.57,5.83h36.99c3.33,0,5.34-2.61,4.49-5.83l-23.4-88.58c-2.72-9.7-7.77-27.76-23.47-27.76-3.9,0-7.15,1.12-9.86,2.95,15.03.65,19.95,18.21,22.62,27.73Z"/>
					</svg>
				</div>
				
				<!-- Headline -->
				<h1 class="title text-4xl md:text-5xl lg:text-6xl font-bold mb-6 bg-gradient-to-r from-accent-two/85 via-accent-one/85 to-accent-two/85 dark:from-accent-two dark:via-accent-one dark:to-accent-two bg-clip-text text-transparent">
					MaiPDF
				</h1>
				
				<!-- Subtitle -->
				<p class="text-xl md:text-2xl font-medium mb-4 text-textColor/90">
					Secure PDF Sharing Platform
				</p>
				
				<!-- Description -->
				<p class="text-lg mb-12 max-w-3xl mx-auto text-textColor/80 leading-relaxed">
					Convert PDF files into shareable links or QR codes with access restrictions, copy protection, and tracking features.
				</p>
				
				<!-- CTA Buttons -->
				<div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6 mb-16">
					<a href="https://maipdf.com" class="inline-flex items-center justify-center px-8 py-4 rounded-lg font-semibold text-white bg-gradient-to-r from-accent-one to-accent-two hover:brightness-110 transition-all shadow-lg text-lg">
						Try MaiPDF Free
					</a>
					<a href="/posts/" class="inline-flex items-center justify-center px-8 py-4 rounded-lg font-semibold border border-accent-one/30 text-accent-one hover:bg-accent-one/10 transition-all text-lg">
						Learn More
					</a>
				</div>
				
				<!-- Feature highlights -->
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-5xl mx-auto">
					<div class="p-6 rounded-xl bg-bgColor/60 backdrop-blur-sm border border-accent-one/20 hover:border-accent-one/40 transition-all hover:shadow-lg">
						<div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-accent-one/20 to-accent-two/20 text-2xl">
							üîó
						</div>
						<h3 class="font-semibold text-lg mb-3 text-center">Generate Links or QR Codes</h3>
						<p class="text-sm text-textColor/70 text-center leading-relaxed">Convert PDF files into shareable links or QR codes for easy distribution</p>
					</div>
					
					<div class="p-6 rounded-xl bg-bgColor/60 backdrop-blur-sm border border-accent-one/20 hover:border-accent-one/40 transition-all hover:shadow-lg">
						<div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-accent-one/20 to-accent-two/20 text-2xl">
							‚è∞
						</div>
						<h3 class="font-semibold text-lg mb-3 text-center">Set Access Limits</h3>
						<p class="text-sm text-textColor/70 text-center leading-relaxed">Set maximum open count and reading duration for better control</p>
					</div>
					
					<div class="p-6 rounded-xl bg-bgColor/60 backdrop-blur-sm border border-accent-one/20 hover:border-accent-one/40 transition-all hover:shadow-lg">
						<div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-accent-one/20 to-accent-two/20 text-2xl">
							üîí
						</div>
						<h3 class="font-semibold text-lg mb-3 text-center">Access Control</h3>
						<p class="text-sm text-textColor/70 text-center leading-relaxed">Set file expiration date for automatic access blocking when needed</p>
					</div>
					
					<div class="p-6 rounded-xl bg-bgColor/60 backdrop-blur-sm border border-accent-one/20 hover:border-accent-one/40 transition-all hover:shadow-lg">
						<div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-accent-one/20 to-accent-two/20 text-2xl">
							üõ°Ô∏è
						</div>
						<h3 class="font-semibold text-lg mb-3 text-center">Prevent Copy & Print</h3>
						<p class="text-sm text-textColor/70 text-center leading-relaxed">Restrict file copying, printing and download permissions</p>
					</div>
					
					<div class="p-6 rounded-xl bg-bgColor/60 backdrop-blur-sm border border-accent-one/20 hover:border-accent-one/40 transition-all hover:shadow-lg lg:col-span-2">
						<div class="w-12 h-12 mx-auto mb-4 flex items-center justify-center rounded-full bg-gradient-to-br from-accent-one/20 to-accent-two/20 text-2xl">
							üìä
						</div>
						<h3 class="font-semibold text-lg mb-3 text-center">Access Tracking</h3>
						<p class="text-sm text-textColor/70 text-center leading-relaxed">View link access records and monitor file usage with detailed analytics</p>
					</div>
				</div>
			</div>
		</section>
		
		<!-- Social Links -->
		<section class="pb-16 px-4">
			<div class="max-w-4xl mx-auto text-center">
				<SocialList />
			</div>
		</section>
	</div>
				
	<!-- Posts Section -->
	<section aria-label="Blog post list" class="py-16 px-4 bg-bgColor/30">
		<div class="max-w-4xl mx-auto">
			<h2 class="title mb-8 text-2xl text-accent-two text-center">
				<a href="/posts/" class="hover:underline">Latest Features & Updates</a>
			</h2>
			<ul class="space-y-6" role="list">
				{
					allPostsByDate.map((p) => (
						<li>
							<PostPreview post={p} />
						</li>
					))
				}
			</ul>
		</div>
	</section>
	
	<!-- Notes Section -->
	{
		latestNotes.length > 0 && (
			<section class="py-16 px-4">
				<div class="max-w-4xl mx-auto">
					<h2 class="title mb-8 text-2xl text-accent-two text-center">
						<a href="/notes/" class="hover:underline">Quick Start Guides</a>
					</h2>
					<div class="grid grid-cols-1 gap-8 sm:grid-cols-2">
						{
							latestNotes.map((note) => (
								<div>
									<Note note={note} as="h4" isPreview />
								</div>
							))
						}
					</div>
				</div>
			</section>
		)
	}
</PageLayout>

